(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=e(n);fetch(n.href,l)}})();function C(o){const t={};return o.forEach(e=>{const r=JSON.stringify(e);t[r]=e}),Object.values(t)}const s={board:null,selectedCell:null,level:1},L=()=>{const o=B(),t=S(o);return s.board=t,s.board},S=o=>{const t=p(JSON.parse(JSON.stringify(o)));if(typeof t=="object"){for(let e=0;e<t.length;e++)for(let r=0;r<t[0].length;r++)Math.random()>.2&&(t[e][r]="");return t}return null},$=()=>{let o=!0,t=[];if(!s.board)return{isBoardValid:o,invalidCoords:t};const{board:e}=s;for(let r=0;r<e.length;r++)for(let n=0;n<e[0].length;n++){const l={},c={i:r,j:n},d=e[r][n],f=g(c);for(let i=0;i<f.length;i++){const u=f[i],m=e[u.i][u.j],E=d===m,j=l[m];m.length&&(j?(t.push(u),o&&(o=!1)):!j&&E&&(l[m]=!0))}}return t=C(t),{isBoardValid:o,invalidCoords:t}},k=o=>{s.selectedCell=o},v=o=>{const{board:t}=s;if(!t)return;const e=[];for(let r=0;r<t.length;r++)for(let n=0;n<t.length;n++)t[r][n]===o&&e.push({i:r,j:n});return e},y=(o=s==null?void 0:s.selectedCell)=>{if(o)return b(o.id)},N=o=>{var t;if((t=s.selectedCell)!=null&&t.classList.contains("constant"))return null;if(s.selectedCell&&s.board){const e=b(s.selectedCell.id);return s.board[e.i][e.j]=o,{...e,num:o}}return null},b=o=>{const t=o.split("-");return{i:+t[0],j:+t[1]}};function g(o){const{i:t,j:e}=o,r=[];for(let i=0;i<9;i++){const u={i:t,j:i};r.push(u)}for(let i=0;i<9;i++){const u={i,j:e};r.push(u)}const n=Math.floor(t/3)*3,l=Math.floor(e/3)*3,c={i:n,j:l},d=[{i:c.i,j:c.j},{i:c.i+1,j:c.j},{i:c.i+2,j:c.j},{i:c.i,j:c.j+1},{i:c.i+1,j:c.j+1},{i:c.i+2,j:c.j+1},{i:c.i,j:c.j+2},{i:c.i+1,j:c.j+2},{i:c.i+2,j:c.j+2}];return C([...r,...d])}const B=(o=9)=>{let t=[];for(let e=0;e<o;e++){t[e]=[];for(let r=0;r<o;r++){const n="";t[e][r]=n}}return t};function A(o,t,e){const r=g(t);for(let n=0;n<r.length;n++){const l=r[n];if(o[l.i][l.j]===e.toString())return!1}return!0}function p(o){if(!o)return!1;const t=T(o);if(!t)return o;for(let e=1;e<=9;e++)if(A(o,t,e)){if(o[t.i][t.j]=e.toString(),p(o))return o;o[t.i][t.j]=""}return!1}function T(o){for(let t=0;t<o.length;t++)for(let e=0;e<o.length;e++)if(o[t][e]==="")return{i:t,j:e};return null}function I(o){var e;const t=y(o);t&&((e=g(t))==null||e.forEach(({i:r,j:n})=>{const l=document.getElementById(`${r}-${n}`);l!=null&&l.classList.contains("affected")||l==null||l.classList.add("affected")}))}function w(o){var e;if(document.querySelectorAll(".similar").forEach(r=>r.classList.remove("similar")),!((e=o.textContent)!=null&&e.length))return;const t=v(o.textContent);t&&t.forEach(r=>{var n;(n=document.getElementById(`${r.i}-${r.j}`))==null||n.classList.add("similar")})}function a(o){document.querySelectorAll(".selected").forEach(t=>t.classList.remove("selected")),k(o),o.classList.add("selected"),document.querySelectorAll(".affected").forEach(t=>t.classList.remove("affected")),I(o),w(o)}function O(o){o.forEach(t=>{var e;(e=document.getElementById(`${t.i}-${t.j}`))==null||e.classList.add("red")})}function q(o){if(!o)return;const t=document.getElementById(`${o.i}-${o.j}`);t&&(t.innerHTML=o.num)}function h(o){const t=N(o);q(t);const{isBoardValid:e,invalidCoords:r}=$();document.querySelectorAll(".red").forEach(n=>n.classList.remove("red")),e||O(r)}function M(o){const t=Number(o.key);if(Number.isInteger(t)&&t!==0){h(t.toString());return}const e=y();if(e)switch(o.key){case"Backspace":h("");break;case"ArrowLeft":{if(e.i<1)return;const r=document.getElementById(`${e.i-1}-${e.j}`);r&&a(r)}break;case"ArrowRight":{if(e.i>12)return;const r=document.getElementById(`${e.i+1}-${e.j}`);r&&a(r)}break;case"ArrowDown":{if(e.j>12)return;const r=document.getElementById(`${e.i}-${e.j+1}`);r&&a(r)}break;case"ArrowUp":{if(e.j<1)return;const r=document.getElementById(`${e.i}-${e.j-1}`);r&&a(r)}break}}const P=(o,t)=>{let e='<table border="0"><tbody>';for(let l=0;l<o.length;l++){const c=l<o.length-1?l%3===2?"border-right-bold":"border-right":"";e+=`<tr class="${c}">`;for(let d=0;d<o[0].length;d++){var r=o[l][d];const f="cell",i=o[l][d]?"constant":"",u=d<o[0].length-1?d%3===2?"border-bottom-bold":"border-bottom":"";e+=`<td  class="${f} ${u} ${i}" id="${l}-${d}"  >${r}</td>`}e+="</tr>"}e+="</tbody></table>";const n=document.querySelector(t);n&&(n.innerHTML=e)},U=()=>{const o=L();o&&P(o,".board"),document.querySelectorAll(".cell").forEach(e=>e.addEventListener("click",()=>a(e))),document.querySelectorAll(".num-btn").forEach(e=>e.addEventListener("click",()=>{h(e.textContent||"")})),window.addEventListener("keyup",M)};window.addEventListener("load",U);
